{"version":3,"sources":["../node_modules/lyam/dist/index.esm.js","romka.js"],"names":["hasDocument","document","hasWindow","window","hasNavigator","navigator","hasScreen","screen","getCharset","charset","toLowerCase","getHost","location","hostname","getPageUrl","href","getReferrer","referrer","getTitle","title","cookieEnabled","getScreenSize","width","height","colorDepth","join","truncate","str","len","slice","getRandom","Math","floor","random","MAX_TITLE_LEN","addParam","result","name","value","push","getBrowserInfo","params","Object","keys","forEach","key","queryStringify","filter","map","encodeURIComponent","MAX_URL_LEN","prepareUrl","url","sendData","counterId","queryParams","sendBeacon","fetch","credentials","Image","src","hitExt","browserInfo","pageParams","userVars","data","rn","ut","JSON","stringify","hit","hitParams","undefined","reachGoal","extLink","link","ln","file","dl","pa","notBounce","nb","canvasElement","createElement","className","body","appendChild","windowSizeMatcher","innerWidth","innerHeight","addEventListener","canvas","getContext","lastDrawCall","Date","getTime","drawShape","x","y","beginPath","colorModifier","strokeStyle","arc","PI","stroke","e","clientX","clientY","toucher","touches","touch","perFrameEffect","requestAnimationFrame","i","box","clearRect","fillStyle","rect","fill","font","randomText","toString","fillText","mId","setTimeout"],"mappings":"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","file":"romka.61ae223f.js","sourceRoot":"..\\src","sourcesContent":["var hasDocument = typeof document !== 'undefined';\nvar hasWindow = typeof window !== 'undefined';\nvar hasNavigator = typeof navigator != 'undefined';\nvar hasScreen = typeof screen != 'undefined';\nfunction getCharset() {\n    return hasDocument && typeof document.charset === 'string' ?\n        document.charset.toLowerCase() :\n        '';\n}\nfunction getHost() {\n    return hasWindow && window.location ? window.location.hostname : '';\n}\nfunction getPageUrl() {\n    return hasWindow && window.location ? window.location.href : '';\n}\nfunction getReferrer() {\n    return hasDocument ? document.referrer : '';\n}\nfunction getTitle() {\n    return hasDocument ? document.title : '';\n}\nfunction cookieEnabled() {\n    return hasNavigator ? navigator.cookieEnabled : false;\n}\nfunction getScreenSize() {\n    return hasScreen ? [\n        screen.width,\n        screen.height,\n        screen.colorDepth\n    ].join('x') : '';\n}\n\nfunction truncate(str, len) {\n    return (str || '').slice(0, len);\n}\n\nfunction getRandom() {\n    return Math.floor(Math.random() * 1E6);\n}\n\nvar MAX_TITLE_LEN = 512;\nfunction addParam(result, name, value) {\n    if (value || value === 0) {\n        result.push(name + ':' + (value === true ? '1' : value));\n    }\n}\nfunction getBrowserInfo(params, title) {\n    var result = [];\n    if (params) {\n        Object.keys(params).forEach(function (key) { return addParam(result, key, params[key]); });\n    }\n    addParam(result, 'rn', getRandom());\n    addParam(result, 'c', cookieEnabled());\n    addParam(result, 's', getScreenSize());\n    addParam(result, 'en', getCharset());\n    addParam(result, 't', truncate(title, MAX_TITLE_LEN));\n    return result.join(':');\n}\n\nfunction queryStringify(params) {\n    return Object.keys(params)\n        .filter(function (key) { return params[key] || params[key] === 0; })\n        .map(function (key) { return encodeURIComponent(key) + '=' + encodeURIComponent(params[key]); })\n        .join('&');\n}\nvar MAX_URL_LEN = 1024;\nfunction prepareUrl(url) {\n    return truncate(url, MAX_URL_LEN);\n}\n\nfunction sendData(counterId, queryParams) {\n    var url = 'https://mc.yandex.ru/watch/' + counterId + '?' + queryStringify(queryParams);\n    var hasBeacon = typeof navigator !== 'undefined' && navigator.sendBeacon;\n    if (!hasBeacon || !navigator.sendBeacon(url, ' ')) {\n        if (typeof fetch !== 'undefined') {\n            fetch(url, { credentials: 'include' });\n        }\n        else if (typeof Image !== 'undefined') {\n            new Image().src = url;\n        }\n    }\n}\n\nfunction hitExt(params) {\n    var browserInfo = params.browserInfo, counterId = params.counterId, pageParams = params.pageParams, userVars = params.userVars;\n    var data = {\n        'browser-info': getBrowserInfo(browserInfo, pageParams.title),\n        rn: getRandom(),\n        ut: pageParams.ut\n    };\n    if (pageParams.url) {\n        data['page-url'] = prepareUrl(pageParams.url);\n    }\n    if (pageParams.referrer) {\n        data['page-ref'] = prepareUrl(pageParams.referrer);\n    }\n    if (userVars) {\n        data['site-info'] = JSON.stringify(userVars);\n    }\n    sendData(counterId, data);\n}\n/**\n * Отправка хита.\n *\n * @param counterId - Номер счётчика.\n * @param hitParams -  Параметры страницы.\n * @param userVars - Параметры визитов.\n *\n * @example\n * hit('123456');\n *\n * hit('123456', {\n *     referer: document.referer,\n *     title: document.title,\n *     url: window.location.href\n * }, {\n *     myParam: 'value'\n * });\n */\nfunction hit(counterId, hitParams, userVars) {\n    var referrer = hitParams && hitParams.referrer !== undefined ?\n        hitParams.referrer :\n        getReferrer();\n    var title = hitParams && hitParams.title !== undefined ?\n        hitParams.title :\n        getTitle();\n    var url = hitParams && hitParams.url !== undefined ?\n        hitParams.url :\n        getPageUrl();\n    hitExt({\n        counterId: counterId,\n        pageParams: {\n            referrer: referrer,\n            title: title,\n            url: url\n        },\n        userVars: userVars\n    });\n}\n/**\n * Достижение цели.\n *\n * @param counterId - Номер счётчика.\n * @param name - Название цели.\n * @param userVars - Параметры визитов.\n *\n * @example\n * reachGoal('123456', 'goalName');\n*/\nfunction reachGoal(counterId, name, userVars) {\n    var referrer;\n    var url;\n    if (name) {\n        referrer = getPageUrl();\n        url = \"goal://\" + getHost() + \"/\" + name;\n    }\n    else {\n        referrer = getReferrer();\n        url = getPageUrl();\n    }\n    hitExt({\n        counterId: counterId,\n        pageParams: { referrer: referrer, url: url },\n        userVars: userVars\n    });\n}\n/**\n * Внешняя ссылка.\n *\n * @param counterId - Номер счётчика.\n * @param link - Адрес ссылки.\n * @param title - Заголовок страницы.\n *\n * @example\n * extLink('12356', 'https://example.com');\n */\nfunction extLink(counterId, link, title) {\n    if (link) {\n        hitExt({\n            browserInfo: { ln: true },\n            counterId: counterId,\n            pageParams: {\n                referrer: getPageUrl(),\n                title: title,\n                url: link,\n                ut: 'noindex'\n            }\n        });\n    }\n}\n/**\n * Загрузка файла.\n *\n * @param counterId - Номер счётчика.\n * @param file - Ссылка на файл.\n * @param title - Заголовок страницы.\n *\n * @example\n * file('123456', 'https://mysite.com/file.zip');\n */\nfunction file(counterId, file, title) {\n    if (file) {\n        hitExt({\n            browserInfo: {\n                dl: true,\n                ln: true\n            },\n            counterId: counterId,\n            pageParams: {\n                referrer: getReferrer(),\n                title: title,\n                url: file\n            }\n        });\n    }\n}\n/**\n * Параметры визитов.\n *\n * @param counterId - Номер счётчика.\n * @param data - Параметры визитов.\n *\n * @example\n * userVars('123456', { myParam: 'value' });\n */\nfunction userVars(counterId, data) {\n    if (data) {\n        hitExt({\n            browserInfo: { pa: true },\n            counterId: counterId,\n            pageParams: {},\n            userVars: data\n        });\n    }\n}\n/**\n * Не отказ.\n *\n * @example\n * notBounce('123456');\n */\nfunction notBounce(counterId) {\n    hitExt({\n        browserInfo: { nb: true },\n        counterId: counterId,\n        pageParams: {}\n    });\n}\n\nexport { extLink, file, hit, hitExt, notBounce, reachGoal, userVars };\n","import { hit, notBounce } from 'lyam';\r\n\r\n(function() {\r\n    let canvasElement = document.createElement('canvas');\r\n    canvasElement.className = 'interactive';\r\n\r\n    canvasElement = document.body.appendChild(canvasElement);\r\n\r\n    const windowSizeMatcher = function() {\r\n        canvasElement.width = window.innerWidth;\r\n        canvasElement.height = window.innerHeight;\r\n    };\r\n\r\n    windowSizeMatcher();\r\n\r\n    window.addEventListener('resize', function() {\r\n        windowSizeMatcher();\r\n    });\r\n\r\n    const canvas = canvasElement.getContext('2d');\r\n\r\n    let lastDrawCall = new Date().getTime();\r\n\r\n    const drawShape = function(x, y) {\r\n        if (new Date().getTime() - lastDrawCall < 50)\r\n            return;\r\n\r\n        lastDrawCall = new Date().getTime();\r\n\r\n        canvas.beginPath();\r\n        const colorModifier = Math.floor(Math.random() * 50) + 10;\r\n        canvas.strokeStyle = `rgb(${107 + colorModifier}, ${88 + colorModifier}, ${190 + colorModifier})`;\r\n        canvas.arc(x, y, Math.floor(Math.random() * 40) + 10, 0, 2 * Math.PI);\r\n        canvas.stroke();\r\n    };\r\n\r\n    window.addEventListener('mousemove', function(e) {\r\n        drawShape(e.clientX, e.clientY);\r\n    });\r\n\r\n    const toucher = function(e) {\r\n        for (let touch of e.touches) {\r\n            drawShape(touch.clientX, touch.clientY);\r\n        }\r\n    };\r\n\r\n    window.addEventListener('touchstart', function(e) {\r\n        toucher(e);\r\n    });\r\n\r\n    window.addEventListener('touchmove', function(e) {\r\n        toucher(e);\r\n    });\r\n\r\n    const perFrameEffect = function() {\r\n        window.requestAnimationFrame(function() {\r\n            for (let i = 0; i < Math.floor(Math.random() * 20) + 5; i++) {\r\n                const box = Math.floor(Math.random() * 20) + 10;\r\n                canvas.clearRect(Math.floor(Math.random() * window.innerWidth), Math.floor(Math.random() * window.innerHeight), box, box);\r\n            }\r\n\r\n            canvas.beginPath();\r\n            canvas.fillStyle  = 'rgb(127, 108, 255)';\r\n            const box = Math.floor(Math.random() * 5) + 1;\r\n            canvas.rect(Math.floor(Math.random() * window.innerWidth), Math.floor(Math.random() * window.innerHeight), box, box);\r\n            canvas.fill();\r\n\r\n            canvas.font = `${ Math.floor(Math.random() * 4) + 8}px monospace`;\r\n            const randomText = Math.random().toString(32).slice(3, Math.floor(Math.random() * 5) + 3);\r\n            canvas.fillText(randomText, Math.floor(Math.random() * window.innerWidth), Math.floor(Math.random() * window.innerHeight));\r\n\r\n            perFrameEffect();\r\n        });\r\n    };\r\n\r\n    perFrameEffect()\r\n\r\n    const mId = '43383209';\r\n    hit(mId);\r\n\r\n    setTimeout(function() {\r\n        notBounce(mId);\r\n    }, 10000);\r\n})();\r\n"]}